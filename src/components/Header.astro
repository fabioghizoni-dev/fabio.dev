---
const alt = "Logo Fábio Ghizoni";
import { Image } from "astro:assets";
const title = "Voltar para a página inicial";
import SwitchLang from "../ui/test/SwitchLang.astro";
import SwitchTheme from "../ui/test/SwitchTheme.astro";
---

<header
  id="header"
  role="heading"
  aria-level="1"
  class="fixed hidden w-full top-0 justify-between items-center border-b-2 border-purple-blue backdrop-blur-3xl gap-4 px-2
    py-1 z-1"
>
  <Image
    id="logo"
    alt={alt}
    width={80}
    height={80}
    title={title}
    loading="eager"
    src="/logo.svg"
    onclick="goHome()"
    class="h-9 cursor-pointer animate-show-logo"
  />
  <ul class="flex justify-center items-center text-xl font-bold text-purple-blue font-cascadia-code gap-4">
    <li onclick="goSection(`about-me`)" class="cursor-pointer">About me</li>
    <li onclick="goSection(`contact-me`)" class="cursor-pointer">Contact me</li>
  </ul>
  <SwitchTheme />
  <SwitchLang />
</header>

<script is:inline>
  function goHome() {
    if (window.location.pathname !== "/") {
      window.location.href = "/";
    }
  }
  function goSection(id) {
    const section = document.getElementById(id);
    section.scrollIntoView({ behavior: "smooth" });
  }

  const header = document.getElementById("header");

  function headerHiddenOnLoad() {
    const currentScrollY = window.scrollY;
    if (currentScrollY <= 200) {
      // hidden to flex
      header.classList.replace("hidden", "flex");
      header.classList.add("transition-all", "ease-in-out", "duration-500");
    } else {
      // flex to hidden
      header.classList.replace("flex", "hidden");
      header.classList.remove("transition-all", "ease-in-out", "duration-500");
    }
  }

  /* function updateHeaderVisibility() {
    const currentScrollY = window.scrollY;
    if (currentScrollY > 200) {
      header.classList.remove("opacity-100");
      header.classList.add("opacity-0", "animate-height", "-translate-y-3");
    } else {
      header.classList.add("opacity-100");
      header.classList.remove("opacity-0", "animate-height", "-translate-y-3");
    }
  } */

  headerHiddenOnLoad();
  //window.addEventListener("scroll", updateHeaderVisibility);
</script>
