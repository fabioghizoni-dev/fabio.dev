---
import { actions } from "astro:actions";
import p from "../constants/personal";
import Modal from "../ui/Modal.astro";
import SocialButton from "../ui/SocialButton.astro";
import cn from "../utils";

let showModal = false;
const actionResult = Astro.getActionResult(actions.send);
if (actionResult?.data?.success) showModal = true;
---

<section
  id="contact-me"
  class={cn(
    "flex bg-light flex-col w-full min-h-screen justify-center items-center font-cascadia-code gap-8 px-8 py-12",
  )}
>
  {
    showModal && (
      <Modal
        btnLabel="Ok"
        switchLang={false}
        id="modal-success-email"
        title="Email sent successfully!"
        message="Thank you for contacting me. Keep an eye on your email, I'll reply shortly."
      />
    )
  }
  <h1 class="text-center text-3xl font-medium md:text-4xl dark:text-white">
    Get in touch
  </h1>
  <h2 class="max-w-5xl text-center text-lg md:text-2xl dark:text-white">
    I'm always open to new opportunities and collaborations. Feel free to
    contact me through any of the channels below.
  </h2>
  <div
    class="flex w-full flex-wrap items-center justify-center gap-4 *:flex-1 md:gap-8 md:*:flex-none"
  >
    <SocialButton>Whatsapp</SocialButton>
    <SocialButton
      name="line-md:instagram"
      title={p.socials.insta}
      href={p.socials.insta}
    >
      Instagram
    </SocialButton>
    <SocialButton
      name="line-md:github"
      title={p.socials.github}
      href={p.socials.github}>Github</SocialButton
    >
    <SocialButton
      name="line-md:linkedin"
      title={p.socials.linkedin}
      href={p.socials.linkedin}>LinkedIn</SocialButton
    >
  </div>
  <form
    method="post"
    id="contact-form"
    name="contact-form"
    class="text-gray-default flex w-full max-w-2xl flex-col gap-4 text-base md:text-2xl dark:text-white"
  >
    <div class="flex flex-col gap-2">
      <label for="name" class="text-base font-medium md:text-2xl"
        >Your name</label
      >
      <input
        required
        id="name"
        name="name"
        type="text"
        minlength="2"
        maxlength="100"
        autocomplete="name"
        placeholder="Your name here"
        class="rounded-lg border-2 border-white/30 bg-black px-3 py-2 text-white transition placeholder:text-white/50 focus:border-white/70 focus:outline-none md:px-4"
      />
    </div>
    <div class="flex flex-col gap-2">
      <label for="email" class="text-base font-medium md:text-2xl"
        >Your e-mail</label
      >
      <input
        required
        id="email"
        type="email"
        name="email"
        maxlength="255"
        autocomplete="email"
        placeholder="your.email@example.com"
        class="rounded-lg border-2 border-white/30 bg-black px-3 py-2 text-white transition placeholder:text-white/50 focus:border-white/70 focus:outline-none md:px-4"
      />
    </div>
    <div class="flex flex-col gap-2">
      <label for="message" class="text-base font-medium md:text-2xl"
        >Your message</label
      >
      <textarea
        required
        rows="6"
        id="message"
        name="message"
        minlength="10"
        maxlength="2000"
        placeholder="Write your message here..."
        class="resize-none rounded-lg border-2 border-white/30 bg-black px-3 py-2 text-white transition placeholder:text-white/50 focus:border-white/70 focus:outline-none md:px-4"
      ></textarea>
    </div>
    <button
      id="submit"
      type="submit"
      class={cn(
        `flex justify-center items-center gap-4 bg-linear-to-r from-purple-default to-purple-blue text-white px-6 py-3 mt-4 
          cursor-pointer rounded-lg text-base md:text-xl transition hover:text-white/70 disabled:opacity-50 
            disabled:cursor-not-allowed`,
      )}
    >
      Send message
    </button>
  </form>
</section>

<script src="../scripts/contact-me.ts"></script>
