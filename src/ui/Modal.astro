---
export const prerender = false;
import { Icon } from "astro-icon/components";
import cn, { removeSpaces } from "../utils";
import SwitchLang from "./SwitchLang.astro";

interface Props extends astroHTML.JSX.HTMLAttributes {
  id?: string;
  open?: boolean;
  message?: string;
  btnLabel?: string;
  switchLang?: boolean;
}

let { message }: Props = Astro.props;

message = removeSpaces(
  message ??
    `This website is still under development, therefore it may contain incomplete components and information. 
    I thank you for your understanding!`,
);

const {
  open = false,
  switchLang = true,
  id = "first-modal",
  btnLabel = "Okay, continue",
  title = "Welcome to my website",
  "aria-label": ariaLabel = "Welcome modal",
}: Props = Astro.props;
---

<div
  id={id}
  role="dialog"
  aria-modal="true"
  aria-hidden={`${!open ? "true" : "false"}`}
  data-modal-backdrop
  aria-label={ariaLabel}
  class={`fixed inset-0 ${!open ? "hidden" : "flex"} items-center justify-center bg-black/50 z-50 p-4`}
>
  <div
    class="bg-white dark:bg-gray-default rounded-lg shadow-xl max-w-2xl w-full p-5 relative"
  >
    <div class="absolute flex justify-center items-center gap-2 top-2 right-2">
      {
        switchLang && (
          <SwitchLang
            class="size-6 min-w-6 min-h-6"
            iconClass="text-gray-500 hover:text-purple-blue dark:hover:text-gray-300"
          />
        )
      }
      <Icon
        data-modal-close
        title="Close modal"
        aria-label="Close modal"
        name="line-md:menu-to-close-transition"
        class={cn(`size-6 text-gray-500 hover:text-purple-blue dark:hover:text-gray-300 cursor-pointer 
          transition-colors ease-in-out duration-200`)}
      />
    </div>
    <h2 class="text-xl font-semibold text-gray-900 dark:text-white mb-2">
      {title}
    </h2>

    <p class="text-gray-700 dark:text-gray-300 leading-relaxed mb-4">
      {message}
    </p>

    <div class="flex justify-end gap-3">
      <button
        data-modal-ok
        class="bg-purple-600 hover:bg-purple-700 dark:bg-purple-700 dark:hover:bg-purple-600 text-white
          px-4 py-2 rounded-md font-medium cursor-pointer transition-colors ease-in-out duration-200"
      >
        {btnLabel}
      </button>
    </div>
  </div>
</div>

<script src="../scripts/modal.ts"></script>
