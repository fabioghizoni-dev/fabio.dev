---
import { Icon } from "astro-icon/components";
---

<!-- Mode Dark -->
<Icon id="btn-moon" title="Modo dark" aria-label="Modo dark" name="line-md:sunny-filled-loop-to-moon-filled-alt-loop-transition"
  class={`absolute w-12 h-12 text-black cursor-pointer top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 hidden rounded-full`}/>
<!-- Mode Light -->
<Icon id="btn-sun" title="Modo light" aria-label="Modo light" name="line-md:moon-filled-alt-to-sunny-filled-loop-transition" 
  class={`absolute w-12 h-12 text-black cursor-pointer top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 rounded-full`}/>

<script is:inline>
  document.addEventListener("DOMContentLoaded", () => {
    const btnSun = document.getElementById("btn-sun");
    const btnMoon = document.getElementById("btn-moon");
    if (btnSun && btnMoon) {
      let isDark = false;
      const hide = (el) => {
        el.classList.add("animate-hide");
        el.addEventListener(
          "animationend",
          () => {
            el.classList.remove("animate-hide");
            el.classList.add("hidden");
          },
          { once: true }
        );
      };
      const show = (el) => {
        el.classList.remove("hidden");
        el.classList.add("animate-show");
        el.addEventListener(
          "animationend",
          () => {
            el.classList.remove("animate-show");
          },
          { once: true }
        );
      };
      const toggle = () => {
        isDark = !isDark;
        if (isDark) {
          hide(btnSun);
          show(btnMoon);
        } else {
          show(btnSun);
          hide(btnMoon);
        }
      };
      btnSun.addEventListener("click", toggle);
      btnMoon.addEventListener("click", toggle);
    }
  });
</script>