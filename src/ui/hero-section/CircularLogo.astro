---
import { Image } from "astro:assets";
import cn from "../../utils";

interface Props extends astroHTML.JSX.HTMLAttributes {
  src?: string;
  /** The text must be 70 characters long. */
  text?: string;
  /** Turns the animation on or off. */
  isAnimated?: boolean;
  class?: astroHTML.JSX.HTMLAttributes["class"];
  svgViewBox?: astroHTML.JSX.SVGAttributes["viewBox"];
  circularTextClass?: astroHTML.JSX.SVGAttributes["class"];
}

const {
  isAnimated,
  class: className,
  id = "circular-logo",
  circularTextClass = "",
  src = "/fabio_minor.jpg",
  svgViewBox = "0 0 500 500",
  text = "• CYBERSECURITY • DEVOPS • UI • DATABASES • UX • DESIGNER • AI • CLOUD",
  ...props
}: Props = Astro.props;

const finalClass = cn("relative min-w-64 min-h-64 size-64 group", className);
const circularTextFinalClass = cn(
  "absolute inset-0 -m-10 whitespace-pre text-4xl font-space-grotesk",
  circularTextClass,
);
---

<span id={id} class={finalClass} {...props}>
  <svg
    id="circular-text"
    viewBox={svgViewBox}
    class={cn(
      `${circularTextFinalClass} ${isAnimated ? "animate-spin-slow group-hover:pause" : ""}`,
    )}
  >
    <path
      id="curve"
      fill="none"
      d="M250,250 m-200,0 a200,200 0 1,1 400,0 a200,200 0 1,1 -400,0"></path>
    <text>
      <textPath
        href="#curve"
        class="fill-gray-default select-none dark:fill-white/80"
      >
        {text}
      </textPath>
    </text>
  </svg>
  <Image
    role="img"
    width={100}
    height={100}
    loading="eager"
    src={src}
    class="size-full rounded-full"
    alt="Fábio Henrique Elegant and Social"
  />
</span>
