---
import { HiSun } from "react-icons/hi2";
import { IoIosMoon } from "react-icons/io";
---

<HiSun id="btn-sun" title="Modo light" aria-label="Modo light"
  className={`bg-black text-white w-10 h-10 absolute cursor-pointer top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 
    rounded-full`}/>
<IoIosMoon id="btn-moon" title="Modo dark" aria-label="Modo dark" 
  className={`bg-black text-white w-10 h-10 absolute cursor-pointer top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 hidden 
    rounded-full`}/>

<script is:inline>
  document.addEventListener("DOMContentLoaded", () => {
    const btnSun = document.getElementById("btn-sun");
    const btnMoon = document.getElementById("btn-moon");
    if (btnSun && btnMoon) {
      let isDark = false;
      const hide = (el) => {
        el.classList.add("animate-hide");
        el.addEventListener(
          "animationend",
          () => {
            el.classList.remove("animate-hide");
            el.classList.add("hidden");
          },
          { once: true }
        );
      };
      const show = (el) => {
        el.classList.remove("hidden");
        el.classList.add("animate-show");
        el.addEventListener(
          "animationend",
          () => {
            el.classList.remove("animate-show");
          },
          { once: true }
        );
      };
      const toggle = () => {
        isDark = !isDark;
        if (isDark) {
          hide(btnSun);
          show(btnMoon);
        } else {
          show(btnSun);
          hide(btnMoon);
        }
      };
      btnSun.addEventListener("click", toggle);
      btnMoon.addEventListener("click", toggle);
    }
  });
</script>