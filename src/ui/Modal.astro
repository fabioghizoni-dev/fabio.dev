---
import { Icon } from "astro-icon/components";
import { removeSpaces } from "../utils";
import SwitchLang from "./SwitchLang.astro";

interface Props extends astroHTML.JSX.HTMLAttributes {
  id?: string;
  message?: string;
  btnLabel?: string;
  switchLang?: boolean;
}

let { message }: Props = Astro.props;

message = removeSpaces(
  message ??
    `This website is still under development, therefore it may contain incomplete components and information. 
    I thank you for your understanding!`,
);

const {
  switchLang = true,
  id = "first-modal",
  btnLabel = "Okay, continue",
  title = "Welcome to my website",
  "aria-label": ariaLabel = "Welcome modal",
}: Props = Astro.props;
---

<div
  id={id}
  role="dialog"
  aria-modal={false}
  aria-hidden={true}
  data-modal-backdrop
  aria-label={ariaLabel}
  class="fixed inset-0 z-50 hidden items-center justify-center bg-black/50 p-4"
>
  <div
    class="dark:bg-gray-default relative w-full max-w-2xl rounded-lg bg-white p-5 shadow-xl"
  >
    <div class="absolute top-2 right-2 flex items-center justify-center gap-2">
      {
        switchLang && (
          <SwitchLang
            class="size-6 min-h-6 min-w-6"
            iconClass="text-gray-500 hover:text-purple-blue dark:hover:text-gray-300"
          />
        )
      }
      <Icon
        data-modal-close
        title="Close modal"
        aria-label="Close modal"
        name="line-md:menu-to-close-transition"
        class={removeSpaces(`size-6 text-gray-500 hover:text-purple-blue dark:hover:text-gray-300 cursor-pointer 
          transition-colors ease-in-out duration-200`)}
      />
    </div>
    <h2 class="mb-2 text-xl font-semibold text-gray-900 dark:text-white">
      {title}
    </h2>

    <p class="mb-4 leading-relaxed text-gray-700 dark:text-gray-300">
      {message}
    </p>

    <div class="flex justify-end gap-3">
      <button
        data-modal-ok
        class="cursor-pointer rounded-md bg-purple-600 px-4 py-2 font-medium text-white transition-colors duration-200 ease-in-out hover:bg-purple-700 dark:bg-purple-700 dark:hover:bg-purple-600"
      >
        {btnLabel}
      </button>
    </div>
  </div>
</div>

<script src="../scripts/modal.ts"></script>
